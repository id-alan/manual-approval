name: 'Manual Workflow Approval'
description: 'Pause a workflow and get user approval to continue'
inputs:
  approvers:
    description: 'Required approvers'
    required: true
  secret:
    description: 'GitHub token'
    required: true
  minimum-approvals:
    description: 'Minimum number of approvals to progress workflow'
    required: false
    default: '1'
  issue-title:
    description: 'The custom subtitle for the issue'
    required: false
  issue-body:
    description: 'The custom body for the issue'
    required: false
  exclude-workflow-initiator-as-approver:
    description: 'Whether or not to filter out the user who initiated the workflow as an approver'
    required: false
    default: 'false'
outputs:
  issue-number:
    description: 'The number of the issue created'
  issue-url:
    description: 'The URL of the issue created'
  approval-status:
    description: 'The status of the approval ("approved" or "denied")'
runs:
  using: "composite"
  steps:
    - run: ${{ github.action_path }}/manual-approval
      shell: bash
      env:
        GITHUB_TOKEN: ${{ inputs.secret }}
        GITHUB_REPOSITORY: ${{ github.repository }}
        GITHUB_RUN_ID: ${{ github.run_id }}
        GITHUB_ACTOR: ${{ github.actor }}
        INPUT_APPROVERS: ${{ inputs.approvers }}
        INPUT_MINIMUM-APPROVALS: ${{ inputs.minimum-approvals }}
        INPUT_ISSUE-TITLE: ${{ inputs.issue-title }}
        INPUT_ISSUE-BODY: ${{ inputs.issue-body }}
        INPUT_EXCLUDE-WORKFLOW-INITIATOR-AS-APPROVER: ${{ inputs.exclude-workflow-initiator-as-approver }}